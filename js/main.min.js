!function(e,t,i){var a={messages:{required:"The %s field is required.",matches:"The %s field does not match the %s field.","default":"The %s field is still set to default, please change.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"The %s field must be at least %s characters in length.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"The %s field must contain only %s files.",valid_url:"The %s field must contain a valid URL."},callback:function(){}},n=/^(.+?)\[(.+)\]$/,s=/^[0-9]+$/,r=/^\-?[0-9]+$/,l=/^\-?[0-9]*\.?[0-9]+$/,o=/^[a-zA-Z0-9.!#$%&amp;'*+\-\/=?\^_`{|}~\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*$/,c=/^[a-z]+$/i,d=/^[a-z0-9]+$/i,u=/^[a-z0-9_\-]+$/i,h=/^[0-9]+$/i,p=/^[1-9][0-9]*$/i,f=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,m=/[^a-zA-Z0-9\/\+=]/i,v=/^[\d\-\s]+$/,g=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,_=function(e,t,n){this.callback=n||a.callback,this.errors=[],this.fields={},this.form=this._formByNameOrNode(e)||{},this.messages={},this.handlers={};for(var s=0,r=t.length;r>s;s++){var l=t[s];if((l.name||l.names)&&l.rules)if(l.names)for(var o=0;o<l.names.length;o++)this._addField(l,l.names[o]);else this._addField(l,l.name)}var c=this.form.onsubmit;this.form.onsubmit=function(e){return function(t){try{return e._validateForm(t)&&(c===i||c())}catch(a){}}}(this)},y=function(e,t){var i;{if(!(e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(i=0;i<e.length;i++)if(e[i].checked)return e[i][t]}};_.prototype.setMessage=function(e,t){return this.messages[e]=t,this},_.prototype.registerCallback=function(e,t){return e&&"string"==typeof e&&t&&"function"==typeof t&&(this.handlers[e]=t),this},_.prototype._formByNameOrNode=function(e){return"object"==typeof e?e:t.forms[e]},_.prototype._addField=function(e,t){this.fields[t]={name:t,display:e.display||t,rules:e.rules,id:null,type:null,value:null,checked:null}},_.prototype._validateForm=function(e){this.errors=[];for(var t in this.fields)if(this.fields.hasOwnProperty(t)){var a=this.fields[t]||{},n=this.form[a.name];n&&n!==i&&(a.id=y(n,"id"),a.type=n.length>0?n[0].type:n.type,a.value=y(n,"value"),a.checked=y(n,"checked"),this._validateField(a))}return"function"==typeof this.callback&&this.callback(this.errors,e),this.errors.length>0&&(e&&e.preventDefault?e.preventDefault():event&&(event.returnValue=!1)),!0},_.prototype._validateField=function(e){for(var t=e.rules.split("|"),s=e.rules.indexOf("required"),r=!e.value||""===e.value||e.value===i,l=0,o=t.length;o>l;l++){var c=t[l],d=null,u=!1,h=n.exec(c);if((-1!==s||-1!==c.indexOf("!callback_")||!r)&&(h&&(c=h[1],d=h[2]),"!"===c.charAt(0)&&(c=c.substring(1,c.length)),"function"==typeof this._hooks[c]?this._hooks[c].apply(this,[e,d])||(u=!0):"callback_"===c.substring(0,9)&&(c=c.substring(9,c.length),"function"==typeof this.handlers[c]&&this.handlers[c].apply(this,[e.value,d])===!1&&(u=!0)),u)){var p=this.messages[c]||a.messages[c],f="An error has occurred with the "+e.display+" field.";p&&(f=p.replace("%s",e.display),d&&(f=f.replace("%s",this.fields[d]?this.fields[d].display:d))),this.errors.push({id:e.id,name:e.name,message:f,rule:c});break}}},_.prototype._hooks={required:function(e){var t=e.value;return"checkbox"===e.type||"radio"===e.type?e.checked===!0:null!==t&&""!==t},"default":function(e,t){return e.value!==t},matches:function(e,t){var i=this.form[t];return i?e.value===i.value:!1},valid_email:function(e){return o.test(e.value)},valid_emails:function(e){for(var t=e.value.split(","),i=0;i<t.length;i++)if(!o.test(t[i]))return!1;return!0},min_length:function(e,t){return s.test(t)?e.value.length>=parseInt(t,10):!1},max_length:function(e,t){return s.test(t)?e.value.length<=parseInt(t,10):!1},exact_length:function(e,t){return s.test(t)?e.value.length===parseInt(t,10):!1},greater_than:function(e,t){return l.test(e.value)?parseFloat(e.value)>parseFloat(t):!1},less_than:function(e,t){return l.test(e.value)?parseFloat(e.value)<parseFloat(t):!1},alpha:function(e){return c.test(e.value)},alpha_numeric:function(e){return d.test(e.value)},alpha_dash:function(e){return u.test(e.value)},numeric:function(e){return s.test(e.value)},integer:function(e){return r.test(e.value)},decimal:function(e){return l.test(e.value)},is_natural:function(e){return h.test(e.value)},is_natural_no_zero:function(e){return p.test(e.value)},valid_ip:function(e){return f.test(e.value)},valid_base64:function(e){return m.test(e.value)},valid_url:function(e){return g.test(e.value)},valid_credit_card:function(e){if(!v.test(e.value))return!1;for(var t=0,i=0,a=!1,n=e.value.replace(/\D/g,""),s=n.length-1;s>=0;s--){var r=n.charAt(s);i=parseInt(r,10),a&&(i*=2)>9&&(i-=9),t+=i,a=!a}return t%10===0},is_file_type:function(e,t){if("file"!==e.type)return!0;var i=e.value.substr(e.value.lastIndexOf(".")+1),a=t.split(","),n=!1,s=0,r=a.length;for(s;r>s;s++)i==a[s]&&(n=!0);return n}},e.FormValidator=_}(window,document),function(e){function t(e){var t=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),a=0;a<i.length;a++){var n=jQuery.trim(i[a]);if(n.substring(0,e.length+1)==e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}return t}function i(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function a(e){var t=document.location.host,i=document.location.protocol,a="//"+t,n=i+a;return e==n||e.slice(0,n.length+1)==n+"/"||e==a||e.slice(0,a.length+1)==a+"/"||!/^(\/\/|http:|https:).*/.test(e)}function n(e,t){var i=null;return function(){var a=this,n=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(a,n)},t)}}var s=t("csrftoken");e.ajaxSetup({beforeSend:function(e,t){!i(t.type)&&a(t.url)&&e.setRequestHeader("X-CSRFToken",s)}});var r=function(){e.get("/store/cart.json").done(function(t){for(var i=t.cart,a=0,n=i.length-1;n>=0;n--)a+=i[n].quantity;e(".navitem-cart").text("Items - "+a)})};r();var l=function(){var t,i=e(".products"),a=e("#shopModalTarget");a.css({opacity:0,height:0,width:"100%","text-align":"left",overflow:"hidden",display:"inline-block"});var s=function(){var t=void 0;return e("#mixGridColumnCount").each(function(){t=window.getComputedStyle(this,":before").content,t=t.split("'").join(""),t=t.split('"').join(""),t=parseInt(t,10)}),t},r=function(){var t=i.find("a.product-preview");return t.each(function(i,a){"inline-block"!=e(a).css("display")&&(t=t.not(e(a)))}),t},l=function(){if(!t)return!1;$visibleProducts=r();var n=parseInt($visibleProducts.index(e('[data-i="'+t+'"]')),10)+1,l=s(),o=l-n%l;o==l&&(o=0);var c=o+n-1;$visibleProducts.eq(c).length?a.detach().insertAfter($visibleProducts.eq(c)):a.detach().appendTo(i)};e(".products a").click(function(i){i.preventDefault();var n=e(this),s=n.attr("href"),r=n.attr("class").split("product-preview").join("");t=e(this).data("i");var o;e.when(function(){var t=e.Deferred();return a.height()>0?a.animate({height:0,opacity:0},500,function(){e("html, body").stop().animate({scrollTop:1*n.offset().top+n.height()},500),t.resolve()}):(e("html, body").stop().animate({scrollTop:1*n.offset().top+n.height()},500),t.resolve()),t.promise()}(),e.get(s+"?ajax",function(e){o=e})).done(function(){a.html(o).addClass(r),a.find(".product-gallery .rslides").responsiveSlides({auto:!0,pager:!0,speed:600,manualControls:".product-gallery .custom_tabs",timeout:3600}),l();var e=a.children().outerHeight();a.css("display","inline-block"),a.animate({height:e,opacity:1},500,function(){a.css("height","auto")})})}),e(window).on("resize",n(function(){l()},100)),e(".mixfilter").click(function(){setTimeout(l,1e3)})};l(),e("#cart_body tr").each(function(){var t=e(this),i=t.attr("data-price");t.find(".qty-select").change(function(){var a=e(this),n=a.val();t.find(".col-total").text("$"+parseFloat(i*n).toFixed(2)),o()})});var o=function(){for(var t=e("#cart_body tr"),i=[],a=t.length-1;a>=0;a--)i.push(parseInt(e(t[a]).find(".qty-select").val()));e.post("/store/update-quantities",JSON.stringify(i),function(t){var i=e("#destination-shipping-zone"),a=i.find("option").index(i.find("option:selected"));i.empty();for(var n=0;n<t.zones.length;n++){var s=t.zones[n],r=e("<option>").attr("value",s.pk).attr("data-total",s.total.toFixed(2)).attr("data-calculation",s.ship_cost.toFixed(2)).attr("data-tax-component",s.tax_component).text(s.name);n==a&&r.attr("selected",!0),i.append(r)}e("#cart_subtotal_price").text("$"+t.subtotal.toFixed(2)),c.call(i)},"json")},c=function(){var t=e(this),i=t.find(":selected"),a=i.attr("data-calculation"),n=i.attr("data-total"),s=i.attr("data-tax-component");e("#shipping_price").text("$"+a),e("#cart_total_price").text("$"+n),s?(e("#cart_tax_component").text("("+s+")"),e("#cart_tax_component").show()):e("#cart_tax_component").hide()};e("#destination-shipping-zone").change(c);var d=function(){function t(t){t.response?(e("<input>").attr({type:"hidden",name:"card_token"}).val(t.response.token).appendTo(i),e("<input>").attr({type:"hidden",name:"ip_address"}).val(t.ip_address).appendTo(i),i.get(0).submit()):(t.messages&&e.each(t.messages,function(e,t){c[t.param].parents(".labelfield").addClass("-error")}),r.removeAttr("disabled"))}var i=e("#checkout-form"),a=i.find("#id_different_shipping_address"),n=(i.find("#cc-number"),i.find(".shipping_address"));n.hide(),a.change(function(){a.is(":checked")?n.slideDown():n.slideUp()});var s=new FormValidator("checkout-form",[{name:"email",display:"email address",rules:"required|valid_email"},{name:"billing-street_address",display:"billing street address",rules:"required"},{name:"billing-locality",display:"billing city/town",rules:"required"},{name:"billing-postal_code",display:"billing postcode",rules:"required"},{name:"shipping-street_address",display:"shipping street address",rules:"!callback_required_if_shipping_checkbox"},{name:"shipping-locality",display:"shipping city/town",rules:"!callback_required_if_shipping_checkbox"},{name:"shipping-postal_code",display:"shipping postcode",rules:"!callback_required_if_shipping_checkbox"}],function(t,i){if(e(".labelfield").removeClass("-error"),t.length>0){console.error(t);for(var a=t.length-1;a>=0;a--){var n=t[a];e("#"+n.id).parents(".labelfield").addClass("-error")}}else o(i)});s.registerCallback("required_if_shipping_checkbox",function(e){return a.is(":checked")&&!e?!1:!0}),s.setMessage("required_if_shipping_checkbox","You must fill out your %s."),s.setMessage("required","You must fill out your %s."),s.setMessage("valid_email","Your %s must be valid."),Pin.setPublishableKey(PUBLIC_PIN_KEY);var r=i.find(":submit"),l=i.find(".errors"),o=function(i){i.preventDefault(),l.hide(),r.attr({disabled:!0});var a={number:e("#cc-number").val(),name:e("#cc-name").val(),expiry_month:e("#cc-expiry-month").val(),expiry_year:e("#cc-expiry-year").val(),cvc:e("#cc-cvc").val(),address_line1:e("#id_billing-street_address").val(),address_line2:e("#id_billing-extended_address").val(),address_city:e("#id_billing-locality").val(),address_postcode:e("#id_billing-postal_code").val(),address_country:e("#id_billing-country_name").val()};Pin.createToken(a,t)},c={number:e("#cc-number"),name:e("#cc-name"),expiry_month:e("#cc-expiry-month"),expiry_year:e("#cc-expiry-year"),cvc:e("#cc-cvc")}};e("#checkout-form").length&&d()}(jQuery),function(e){e.fn.dripdin=function(t,i){var a=e(this),n={open:function(){a.find("._content").css("display","block"),a.attr("data-status","open")},close:function(){a.attr("data-status","closed"),a.find("._content").css("display","none")},toggle:function(){a.attr("data-status")&&"closed"!=a.attr("data-status")?n.close():n.open()}};return t?n[t](this,i):this.each(function(){})},e(".shop-filter").dripdin(),e(".shop-filter").on("click","._label",function(t){e(t.delegateTarget).dripdin("toggle")}),e("html").click(function(t){var i=e(t.target).closest(".shop-filter");0==i.length?e(".shop-filter").dripdin("close"):1==i.length&&e(".shop-filter").not(i).dripdin("close")}),e("#mixgrid").mixItUp({selectors:{target:".mix",filter:".mix-filter"},animation:{enable:!1,easing:"ease"},callbacks:{onMixLoad:function(){e(this).mixItUp("setOptions",{animation:{enable:!0}})}}}),e(".shop-filter").on("click",".mixfilter",function(t){var i=e(t.delegateTarget);i.find(".mixfilter").removeClass("-active"),e(this).addClass("-active"),i.find("._current-label").text(e(this).clone().children().remove().end().text());var a="";e(".shop-filters").find(".mixfilter.-active").each(function(){var t=e(this).data("filter");t&&"all"!=t&&(a+=t)});var n=e("#shopModalTarget");n.height()>0?n.animate({height:0,opacity:0},500,function(){n.css("display","none"),e("#mixgrid").mixItUp("filter",a?a:".mix")}):(n.css("display","none"),e("#mixgrid").mixItUp("filter",a?a:".mix"))}),e(".page").on("change","#variation-select",function(){$productDetails=e(this).parents(".product-details");var t=$productDetails.find("#quantity-select"),i=e(this).find("option:selected"),a=parseInt(t.val())*parseFloat(i.data("price"));e("#item-price").text("$"+a.toFixed(2));for(var n="",s=10<i.data("stock-max")?10:i.data("stock-max"),r=1;s>r;r++)n+='<option value="'+r+'">'+r+"</value>";e("#quantity-select").html(n)}),e(".page").on("change","#quantity-select",function(){$productDetails=e(this).parents(".product-details");var t=$productDetails.find("#variation-select option:selected"),i=e(this),a=parseInt(i.val())*parseFloat(t.data("price"));e("#item-price").text("$"+a.toFixed(2))}),e("#js-navtoggle").click(function(t){t.preventDefault();var i=e("#js-navcollapse"),a="-active";e(this).hasClass(a)?(e(this).removeClass(a),i.css("height",0)):(e(this).addClass(a),i.css("height",i.children("ul").height()+"px"))}),e(".js-scrollToID").click(function(t){var i=e(e(this).attr("href").replace("/",""));i.length>0&&(t.preventDefault(),e("html, body").stop().animate({scrollTop:1*i.offset().top},600))}),e(".home-slides .rslides").responsiveSlides({auto:!0,pager:!0,speed:1e3,timeout:4e3,manualControls:".home-slides .custom_tabs"}),e(".product-gallery .rslides").responsiveSlides({auto:!0,pager:!0,speed:1e3,manualControls:".product-gallery .custom_tabs",timeout:4e3});var t=function(e,t){var i=new Image;return i.onload=t,i.src=e,i},i=e("body"),a=i.data("background");if(a){var n=function(t){e('<img src="'+t+'" />').css({opacity:0,position:"absolute",left:0,top:0,width:"100%",height:"auto"}).prependTo(".page").animate({opacity:1},3e3)};t(a,n(a))}var s=e("#cmform"),r=s.find("button"),l=e("#cmform-notes"),o=r.text();s.submit(function(t){t.preventDefault(),r.text("Please wait..."),l.text(""),e.getJSON(this.action+"?callback=?",e(this).serialize(),function(e){400===e.Status?(l.text("Oh no! "+e.Message),r.text(o)):(l.text("Thank you! Your subscription has been confirmed. You've been added to our list and will hear from us soon."),r.text(o))})})}(jQuery);